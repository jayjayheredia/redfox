import{c as u,q as p,w as f,g as d,a as m,d as w}from"./firebase-config-YcMalVYY.js";document.addEventListener("DOMContentLoaded",async function(){const r=document.getElementById("calendar");if(!r){console.error("No se encontró el elemento #calendar en el DOM");return}const a=u(w,"turnos"),l=async()=>(await d(a)).docs.map(e=>{const t=e.data();return{title:`${t.title} (${t.status})`,start:t.start,color:t.status==="pendiente"?"#facc15":"#22c55e"}}),s=new window.FullCalendar.Calendar(r,{initialView:"dayGridMonth",locale:"es",selectable:!0,events:await l(),dateClick:async function(n){const e=prompt(`Hora para ${n.dateStr}`);if(!e)return;const t=prompt("Nombre");if(!t)return;const c=prompt("Teléfono");if(!c)return;const o=`${n.dateStr}T${e}:00`,i=p(a,f("start","==",o));if(!(await d(i)).empty)return alert("Turno ocupado");await m(a,{title:t,start:o,phone:c,status:"pendiente"}),alert("Turno solicitado"),s.addEvent({title:`${t} (pendiente)`,start:o,color:"#facc15"})}});s.render()});
