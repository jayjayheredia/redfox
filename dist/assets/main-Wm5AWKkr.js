import{d as u}from"./firebase-config-DQH0Qggq.js";import{collection as p,query as m,where as f,getDocs as c,addDoc as w}from"https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";import"https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js";import"https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";document.addEventListener("DOMContentLoaded",async function(){const d=document.getElementById("calendar"),n=p(u,"turnos"),i=async()=>(await c(n)).docs.map(e=>{const t=e.data();return{title:`${t.title} (${t.status})`,start:t.start,color:t.status==="pendiente"?"#facc15":"#22c55e"}}),r=new window.FullCalendar.Calendar(d,{initialView:"dayGridMonth",locale:"es",selectable:!0,events:await i(),dateClick:async function(a){const e=prompt(`Hora para ${a.dateStr}`);if(!e)return;const t=prompt("Nombre");if(!t)return;const s=prompt("Tel√©fono");if(!s)return;const o=`${a.dateStr}T${e}:00`,l=m(n,f("start","==",o));if(!(await c(l)).empty)return alert("Turno ocupado");await w(n,{title:t,start:o,phone:s,status:"pendiente"}),alert("Turno solicitado"),r.addEvent({title:`${t} (pendiente)`,start:o,color:"#facc15"})}});r.render()});
