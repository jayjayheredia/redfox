import{d as u}from"./firebase-config-DgPEMhyA.js";import{collection as p,query as m,where as f,getDocs as d,addDoc as w}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";document.addEventListener("DOMContentLoaded",async function(){const a=document.getElementById("calendar");if(!a){console.error("No se encontró el elemento #calendar en el DOM");return}const n=p(u,"turnos"),l=async()=>(await d(n)).docs.map(e=>{const t=e.data();return{title:`${t.title} (${t.status})`,start:t.start,color:t.status==="pendiente"?"#facc15":"#22c55e"}}),c=new window.FullCalendar.Calendar(a,{initialView:"dayGridMonth",locale:"es",selectable:!0,events:await l(),dateClick:async function(o){const e=prompt(`Hora para ${o.dateStr}`);if(!e)return;const t=prompt("Nombre");if(!t)return;const s=prompt("Teléfono");if(!s)return;const r=`${o.dateStr}T${e}:00`,i=m(n,f("start","==",r));if(!(await d(i)).empty)return alert("Turno ocupado");await w(n,{title:t,start:r,phone:s,status:"pendiente"}),alert("Turno solicitado"),c.addEvent({title:`${t} (pendiente)`,start:r,color:"#facc15"})}});c.render()});
