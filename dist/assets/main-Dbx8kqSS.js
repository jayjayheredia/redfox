import{c as u,q as p,w as m,g as c,a as f,d as w}from"./firebase-config-YcMalVYY.js";import"https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js";document.addEventListener("DOMContentLoaded",async function(){const d=document.getElementById("calendar"),a=u(w,"turnos"),i=async()=>(await c(a)).docs.map(e=>{const t=e.data();return{title:`${t.title} (${t.status})`,start:t.start,color:t.status==="pendiente"?"#facc15":"#22c55e"}}),r=new window.FullCalendar.Calendar(d,{initialView:"dayGridMonth",locale:"es",selectable:!0,events:await i(),dateClick:async function(n){const e=prompt(`Hora para ${n.dateStr}`);if(!e)return;const t=prompt("Nombre");if(!t)return;const s=prompt("Tel√©fono");if(!s)return;const o=`${n.dateStr}T${e}:00`,l=p(a,m("start","==",o));if(!(await c(l)).empty)return alert("Turno ocupado");await f(a,{title:t,start:o,phone:s,status:"pendiente"}),alert("Turno solicitado"),r.addEvent({title:`${t} (pendiente)`,start:o,color:"#facc15"})}});r.render()});
