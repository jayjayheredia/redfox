import{d as u}from"./firebase-config-aHfz9ZPR.js";import{collection as p,query as m,where as f,getDocs as c,addDoc as h}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";document.addEventListener("DOMContentLoaded",async function(){const d=document.getElementById("calendar"),a=p(u,"turnos"),l=async()=>(await c(a)).docs.map(r=>{const t=r.data();return{title:`${t.title} (${t.status})`,start:t.start,color:t.status==="pendiente"?"#facc15":"#22c55e"}}),o=new FullCalendar.Calendar(d,{initialView:"dayGridMonth",locale:"es",selectable:!0,events:await l(),dateClick:async function(e){const r=prompt(`Seleccioná el horario para el día ${e.dateStr} (Ejemplo: 14:30)`);if(!r)return;const t=prompt(`Ingresa tu nombre para reservar ${e.dateStr} a las ${r}`);if(!t)return;const s=prompt(`Ingresa un telefono para confirmar el turno ${e.dateStr}`);if(!s)return;const n=`${e.dateStr}T${r}:00`,i=m(a,f("start","==",n));if(!(await c(i)).empty){alert("Este turno ya está reservado. Elegí otro horario.");return}await h(a,{title:t,start:n,phone:s,status:"pendiente"}),alert("Turno solicitado correctamente."),o.addEvent({title:`${t} (pendiente)`,start:n,color:"#facc15"})}});o.render()});
